# 代码审查标准
代码审查的主要目的是确保Google代码库的整体代码运行状况随着时间的推移而得到改善。代码审查的所有工具和流程都是为此而设计的。

为了实现这一目标，必须平衡一系列的权衡。

首先，开发人员必须能够在他们的任务上取得进展。如果您从未提交过代码库的改进，那么代码库永远不会改进。此外，如果审核人员难以进行任何更改，那么开发人员不会在未来进行改进。

另一方面，审阅者有责任确保每个CL具有这样的质量，即随着时间的推移，其代码库的整体代码健康状况不会降低。这可能很棘手，因为代码库通常会随着时间的推移而降低代码运行状况，特别是当团队受到严重的时间限制并且他们觉得必须采取捷径才能实现目标时。

此外，审阅者对他们正在审核的代码拥有所有权和责任。他们希望确保代码库保持一致，可维护以及“代码审查中要查找的内容”中提到的所有其他内容。

因此，我们将以下规则作为我们在代码审查中期望的标准：

**一般来说，一旦CL处于一种状态，即使CL不完美，它肯定会提高正在处理的系统的整体代码健康状态，那么它应该倾向于批准CL。** 

这是所有代码审查指南中的高级原则。

当然，这有一些限制。例如，如果CL添加了审阅者在其系统中不需要的功能，那么即使代码设计良好，审阅者也肯定会拒绝批准。

这里的一个关键点是没有“完美”代码这样的东西 - 只有更好的代码。审稿人不应要求作者在批准之前对每一小块CL进行润色。相反，与他们所建议的变化的重要性相比，审核人员应该平衡进展的必要性。审稿人应该寻求的是持续改进，而不是追求完美。作为一个整体，提高系统的可维护性，可读性和可理解性的CL不应该延迟数天或数周，因为它不是“完美的”。

评论者应该随时留下评论，表达可能更好的东西，但如果它不是很重要，请在其前面加上“Nit：”之类的内容，让作者知道这只是他们可以选择忽略的一点点。

注意：本文档中没有任何内容证明在CL中检查肯定会恶化系统的整体代码运行状况。你唯一能做的就是紧急情况。

## 指导
代码审查可以具有向开发人员教授关于语言，框架或通用软件设计原则的新内容的重要功能。留下评论可以帮助开发人员学习新东西，这总是很好的。共享知识是随着时间的推移改善系统代码健康状况的一部分。请记住，如果您的评论纯粹是教育性的，但对于满足本文档中描述的标准并不重要，请在其前面添加“Nit：”或以其他方式表明作者不必在此CL中解决它。

## 原则
- 技术事实和数据否决了意见和个人偏好。

- 在风格问题上，风格指南是绝对权威。任何不在风格指南中的纯粹风格点（空白等）都是个人偏好的问题。风格应该与那里的风格一致。如果没有以前的样式，请接受作者的。

- 软件设计方面几乎从来不是纯粹的风格问题，也不仅仅是个人偏好。它们基于基本原则，应该权衡这些原则，而不仅仅是个人意见。有时候会有一些有效的选择。如果作者可以证明（通过数据或基于可靠的工程原理）几种方法同样有效，那么审阅者应该接受作者的偏好。否则，选择取决于软件设计的标准原则。

- 如果没有其他规则适用，则审阅者可以要求作者与当前代码库中的内容保持一致，只要这不会恶化系统的整体代码健康状况。

## 解决冲突
在代码审查的任何冲突中，第一步应该始终是开发人员和审阅者根据本文档的内容以及“CL作者指南”和“本审阅者指南”中的其他文档达成共识。

当达成共识变得特别困难时，它可以帮助在审阅者和作者之间进行面对面的会议或VC，而不仅仅是尝试通过代码审查评论来解决冲突。 （但是，如果您这样做，请确保在对CL的评论中记录讨论结果，以供将来的读者使用。）

如果这不能解决问题，解决问题的最常用方法是升级。通常，升级路径是更广泛的团队讨论，有TL权衡，要求维护人员对代码做出决定，或要求Eng经理提供帮助。不要让CL留在那里因为作者和审稿人不能达成协议。

下一页：[在代码审查中需要注意什么](looking-for.md)
